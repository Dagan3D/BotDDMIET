# Telegram Support Bot (–ë–æ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏)

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π Telegram-–±–æ—Ç –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Å–ª—É–∂–±—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏. –ë–æ—Ç —Å–≤—è–∑—ã–≤–∞–µ—Ç –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å **—Ç–æ–ø–∏–∫–∞–º–∏ (—Ñ–æ—Ä—É–º–∞–º–∏)** –≤ —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø–∞—Ö Telegram. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–Ω—ã–º –æ—Ç–¥–µ–ª–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞, –ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞—è–≤–∫–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø–æ –æ—Ç–¥–µ–ª–∞–º:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é, –∏ –±–æ—Ç —Å–æ–∑–¥–∞–µ—Ç —Ç–æ–ø–∏–∫ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –≥—Ä—É–ø–ø–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤.
- **PostgreSQL:** –ù–∞–¥–µ–∂–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π –∏ –ø—Ä–∏–≤—è–∑–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ —Ç–æ–ø–∏–∫–∞–º.
- **Docker & Docker Compose:** –ü—Ä–æ—Å—Ç–∞—è —Ä–∞–∑–≤–µ—Ä—Ç–∫–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π.
- **FSM (–ú–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π):** –õ–æ–≥–∏—á–Ω–æ–µ –≤–µ–¥–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ (–≤—ã–±–æ—Ä —Ç–µ–º—ã -> –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã -> —á–∞—Ç).
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ–æ—Ä—É–º–∞–º–∏ Telegram:** –ö–∞–∂–¥–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–æ–ø–∏–∫. –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –≥—Ä—É–ø–ø–µ.
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–º:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å –¥–∏–∞–ª–æ–≥ (`/stop`), –∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä ‚Äî –∑–∞–∫—Ä—ã—Ç—å —Ç–∏–∫–µ—Ç (`/close`).

## üõ† –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **Python 3.10**
- **Aiogram 3.x** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫.
- **PostgreSQL + asyncpg** ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ë–î.
- **Docker** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è.

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **–¢–æ–∫–µ–Ω –±–æ—Ç–∞:** –ü–æ–ª—É—á–∏—Ç–µ —É [@BotFather](https://t.me/BotFather).
2. **–ì—Ä—É–ø–ø—ã Telegram:** –í–∞–º –Ω—É–∂–Ω—ã —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø—ã —Å –≤–∫–ª—é—á–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π **"–¢–µ–º—ã" (Topics)**.
3. **ID –≥—Ä—É–ø–ø:** –£–∑–Ω–∞–π—Ç–µ ID –≤–∞—à–∏—Ö –≥—Ä—É–ø–ø (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ –±–æ—Ç–∞ —Ç–∏–ø–∞ `@username_to_id_bot` –∏–ª–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—ã). ID –æ–±—ã—á–Ω–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `-100`.
4. **–ê–¥–º–∏–Ω–∫–∞:** –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –≤ –≥—Ä—É–ø–ø–∞—Ö –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å –ø—Ä–∞–≤–æ–º ¬´–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–∞–º–∏¬ª –∏ ¬´–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π¬ª.

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ (Docker) ‚Äî –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –≤–º–µ—Å—Ç–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   ```bash
   git clone https://github.com/your-username/your-repo.git
   cd your-repo
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:**
   –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é:
   ```env
   # –¢–æ–∫–µ–Ω –±–æ—Ç–∞
   BOT_API_TOKEN=123456789:ABCdefGHIjklMNOpqrSTUvwxyz

   # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å –¥–ª—è Docker)
   POSTGRES_USER=postgres
   POSTGRES_PASSWORD=password
   POSTGRES_DB=bot_db
   DB_HOST=db
   DB_PORT=5432

   # ID –≥—Ä—É–ø–ø –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–∫–ª—é—á–∏—Ç–µ –¢–µ–º—ã –≤ –≥—Ä—É–ø–ø–∞—Ö!)
   GROUP_TECH_ID=-1001234567890
   GROUP_BILLING_ID=-1001234567891
   GROUP_OTHER_ID=-1001234567892
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ Docker Compose:**
   ```bash
   docker-compose up -d --build
   ```

–ë–æ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î –∏ –Ω–∞—á–Ω–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è.

## üêç –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ Docker)

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –≤—Ä—É—á–Ω—É—é, –≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π PostgreSQL.

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   pip install -r requirements.txt
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env`:**
   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `DB_HOST` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ `localhost` (–∏–ª–∏ –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ Postgres), –∞ –Ω–µ –Ω–∞ `db`.

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:**
   ```bash
   python BOTDDMIET.py
   ```

## üìñ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –î–ª—è –∫–ª–∏–µ–Ω—Ç–∞ (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
1. –ù–∞–ø–∏—à–∏—Ç–µ `/start`.
2. –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –≤–æ–ø—Ä–æ—Å–∞ (–∫–Ω–æ–ø–∫–∏ –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º).
3. –û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É.
4. –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —É–π–¥–µ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º. –õ—é–±–æ–π –æ—Ç–≤–µ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –ø—Ä–∏–¥–µ—Ç –≤–∞–º –≤ –ª–∏—á–∫—É.
5. –ß—Ç–æ–±—ã –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏–µ, –Ω–∞–ø–∏—à–∏—Ç–µ `/stop`.

### –î–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ (–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏)
1. –ö–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–æ–≤–∞—è –∑–∞—è–≤–∫–∞, –≤ –≥—Ä—É–ø–ø–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è **–Ω–æ–≤—ã–π —Ç–æ–ø–∏–∫** —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
2. –û—Ç–≤–µ—á–∞–π—Ç–µ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä—è–º–æ –≤ —ç—Ç–æ–º —Ç–æ–ø–∏–∫–µ ‚Äî –±–æ—Ç –ø–µ—Ä–µ—à–ª–µ—Ç –∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
3. –ß—Ç–æ–±—ã –∑–∞–∫—Ä—ã—Ç—å –∑–∞—è–≤–∫—É (–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ø–∏–∫ –∏ —É–≤–µ–¥–æ–º–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è), –≤–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `/close` **–≤–Ω—É—Ç—Ä–∏ —Ç–æ–ø–∏–∫–∞**.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `BOTDDMIET.py` ‚Äî –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞ –∏ –ª–æ–≥–∏–∫–∏ –±–æ—Ç–∞.
- `config.py` ‚Äî –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.
- `db_utils.py` ‚Äî –ü—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å PostgreSQL –∏ SQL-–∑–∞–ø—Ä–æ—Å—ã.
- `localization.py` ‚Äî –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã (—Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫).
- `docker-compose.yml` ‚Äî –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–ë–æ—Ç + –ë–î).
- `Dockerfile` ‚Äî –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ –±–æ—Ç–∞.